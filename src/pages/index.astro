---
import '../styles/style.css';
import modelsData from '../data/models.json';
---

<html lang="de">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/svg+xml" href="/narrenhaeusel/assets/favicon.png" />
    <meta name="generator" content={Astro.generator} />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Narrenhäusel</title>
    <link rel="preload" href={modelsData[0].modelPath} as="fetch" crossorigin="anonymous" />
  </head>
  <body>
    <div class="app-container">
      <a href="/narrenhaeusel/cms" class="cms-button" title="CMS">
        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/></svg>
      </a>
      <div class="background-shape"></div>

      <div class="swipe-container" id="swipe-container">
        <div class="slides-wrapper" id="slides-wrapper">
          {modelsData.map((model, index) => (
            <div class="slide" data-index={index}>
              <div class="model-viewer" id={`model-viewer-${index}`} data-model-path={model.modelPath}>
                <canvas id={`canvas-${index}`}></canvas>
              </div>

              <div class="content">
                <div class="coordinates">
                  <span>{model.coordinates.latitude}</span>
                  <span>{model.coordinates.longitude}</span>
                </div>

                <h1 class="title">{model.name}</h1>

                <p class="description">{model.description}</p>

                <button class="content-button">
                  <span class="ar-icon">⬡</span>
                  In Lebensgröße ansehen
                </button>
              </div>
            </div>
          ))}
        </div>

        <div class="pagination" id="pagination">
          {modelsData.map((_, index) => (
            <span class={`dot ${index === 0 ? 'active' : ''}`} data-index={index}></span>
          ))}
        </div>
      </div>

      <div class="button-container">
        <button class="ar-button" id="ar-button">
          <span class="store-icon apple-icon">
            <svg viewBox="0 0 512 512" fill="currentColor"><path d="M255.9 120.9l9.1-15.7c5.6-9.8 18.1-13.1 27.9-7.5 9.8 5.6 13.1 18.1 7.5 27.9l-87.5 151.5h63.3c20.5 0 32 24.1 23.1 40.8H113.8c-11.3 0-20.4-9.1-20.4-20.4 0-11.3 9.1-20.4 20.4-20.4h52l66.6-115.4-20.8-36.1c-5.6-9.8-2.3-22.2 7.5-27.9 9.8-5.6 22.2-2.3 27.9 7.5l8.9 15.7zm-78.7 218l-19.6 34c-5.6 9.8-18.1 13.1-27.9 7.5-9.8-5.6-13.1-18.1-7.5-27.9l14.6-25.2c16.4-5.1 29.8-1.2 40.4 11.6zm168.9-61.7h53.1c11.3 0 20.4 9.1 20.4 20.4 0 11.3-9.1 20.4-20.4 20.4h-29.5l19.9 34.5c5.6 9.8 2.3 22.2-7.5 27.9-9.8 5.6-22.2 2.3-27.9-7.5-48.8-84.5-81.1-140.4-97-168 0 0-4.9-8.5 4.5-22.6 10.8-16.2 24.4-7.4 24.4-7.4l60 103.9z"/></svg>
          </span>
          <span class="store-icon play-icon">
            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M3,20.5V3.5C3,2.91 3.34,2.39 3.84,2.15L13.69,12L3.84,21.85C3.34,21.6 3,21.09 3,20.5M16.81,15.12L6.05,21.34L14.54,12.85L16.81,15.12M20.16,10.81C20.5,11.08 20.75,11.5 20.75,12C20.75,12.5 20.53,12.9 20.18,13.18L17.89,14.5L15.39,12L17.89,9.5L20.16,10.81M6.05,2.66L16.81,8.88L14.54,11.15L6.05,2.66Z"/></svg>
          </span>
          In Lebensgröße ansehen
        </button>
      </div>
    </div>

    <script>
      const isApple = /iPhone|iPad|iPod|Mac/i.test(navigator.userAgent);
      const isAndroid = /Android/i.test(navigator.userAgent);

      if (isApple) {
        document.body.classList.add('is-apple');
      } else if (isAndroid) {
        document.body.classList.add('is-android');
      }

      import '../scripts/main';
    </script>
  </body>
</html>
